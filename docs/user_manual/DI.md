# Модуль дискретного ввода IPCSA-OG-DI 


## Общие сведения

??? example "Тестирование"

    На текущий момент модуль на стадии тестирования. Серийный выпуск запланирован на декабрь 2025 года 

<div class="grid cards" markdown>

![Image title](../img/modules/DI.png){ width="150" align=left  }
Модуль дискретного ввода DI (арт. IPCSA-OG-DI) является 16-ти канальным модулем расширения и предназначен для приема и обработки дискретных команд от внешних устройств.
В модуле предусмотрено две схемы подключения: «сухим» (dry) и «мокрым» (wet) контактом.
При подключении «мокрым» контактом модуль принимает дискретные команды постоянным напряжением 24 В от внешнего источника питания, при этом допускается подача напряжения как положительной, так и отрицательной полярности.
При подключении «сухим» контактом не требуется подача внешнего напряжения.
</div>

## Технические характеристики 
| Характеристика                                      | Значение                                       |
|----------------------------------------------------|-----------------------------------------------|
| Максимальная потребляемая мощность, Вт            | 1,5                                           |
| Количество входных каналов                        | 16                                            |
| Напряжение детектирования логической единицы при подключении «мокрым» контактом, В | от 10 до 30 и от -30 до -10                   |
| Напряжение детектирования логического нуля при подключении «мокрым» контактом, В   | от -3 до 3                                    |
| Время запаздывания, мс                            | 4                                             |
| Время антидребезга, мс                            | 3                                             |
| Гальваническая изоляция                           | Между входной и выходной логикой              |
| Тип проводника                                    | Медный                                        |
| Сечение проводника, мм²                           | От 0,2 до 1,5                                 |
| Масса, г                                          | 125                                           |
| Габариты В×Ш×Г, мм                                | 126×21,3×90                                   |

## Эксплуатационные характеристики
| Характеристика                   | Значение           |
| -------------------------------- | -                  |
| Температура эксплуатации, °С     | От минус 40 до 60  |
| Температура хранения, °С         | От минус 40 до 60  |
| Влажность при хранении, %	       | От 5 до 95         |
| Влажность при эксплуатации, %    | От 5 до 95         |
| Тип монтажа                      | На DIN-рейку 35 мм |
| Расположение при монтаже         | Вертикальное       |

## Схема подключения

<div class="grid cards" markdown>
![Image title](../img/connection/DI.svg){ width="370"; align=left  }

![Image title](../img/connection/connector_18pin.png){ width="170";  }
</div>

Контакты «GND_DRY» и «GND_WET» предназначены для подключения входов по принципу «сухого» или «мокрого» контакта соответственно.

| Обозначение | Название канала | Описание                       |
|-------------|-----------------|--------------------------------|
| 1 - 16      | DO1 - OD16      | Входной канал 1 - 16          |
| 17          | G_WET             | Общий контакт при подклбчении по схеме "мокрый контакт"|
| 18          | G_DRY            | Общий контакт при подклбчении по схеме "сухой контакт" |

## Индикация
![Image title](../img/identification/18_leds.png){ width="50" }


| Обозначение | Индикация | Показатель |
|------------------|----------------------|---------------------------------------|
| P | :green_circle:| Наличие напряжения питания |
| P | :white_circle:| Отсутствие напряжения питания |
| L | :green_circle:| Наличие соединения Ethernet |
| L | :yellow_circle: :green_circle: :yellow_circle: | Обмен данными по Ethernet |
| L | :white_circle:| Отсутствие соединения Ethernet|
| 1-16 | :green_circle:| Контакт 1 - 16 замкнут  |
| 1-16 | :white_circle:| Контакт 1 - 16 разомнут|

## Размеры

=== "Габаритные размеры" 
    ![alt text](../img/dimensions/overall_dimensions_extensions.png)
=== "Установочные размеры"
    ![alt text](../img/dimensions/installation_dimensions.png) 

## Программное обеспечение
Акутуальный конфигурационный файл можно скачать по 
<a href="../../downloads/ipcsa_modules_config.xml" download>ссылке</a>


``` c title="PDO"
SM0: PhysAddr 0x1000, DefaultSize    2, ControlRegister 0x00, Enable 1
  TxPDO 0x1a00 "Byte_Lo"
    PDO entry 0x6000:01,  8 bit, "Input" // (1)!
  TxPDO 0x1a08 "Byte_Hi"
    PDO entry 0x6080:01,  8 bit, "Input"
```

1. Состояние каждого входа указывается соотвествующим битом. Например: 0b00000001 - замкнут контакт 1, 0b00000010 - замкнут контакт 2 и т. д.

``` c title="Ethercat cstruct"
/* Master 0, Slave 0, "IPCSA-OG-DIGITAL-INPUT"
 * Vendor ID:       0xe00004d8
 * Product code:    0x00000020
 * Revision number: 0x00000001
 */

ec_pdo_entry_info_t slave_0_pdo_entries[] = {
    {0x6000, 0x01, 8}, /* Input */
    {0x6080, 0x01, 8}, /* Input */
};

ec_pdo_info_t slave_0_pdos[] = {
    {0x1a00, 1, slave_0_pdo_entries + 0}, /* Byte_Lo */
    {0x1a08, 1, slave_0_pdo_entries + 1}, /* Byte_Hi */
};

ec_sync_info_t slave_0_syncs[] = {
    {0, EC_DIR_INPUT, 2, slave_0_pdos + 0, EC_WD_DISABLE},
    {0xff}
};
``` 

